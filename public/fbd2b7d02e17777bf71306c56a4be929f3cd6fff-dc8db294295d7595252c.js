"use strict";(self.webpackChunkquarkly_export=self.webpackChunkquarkly_export||[]).push([[117],{2751:function(e,n,t){t.d(n,{ke:function(){return c},Am:function(){return s},NN:function(){return a},VA:function(){return i}});var r=t(6540),o=t(1306);var a=(0,o.Ay)(e=>{let{children:n,...t}=e;const o=(0,r.useRef)(null);return(0,r.useLayoutEffect)(()=>{if(!o.current)return;o.current.innerHTML='\n      <style>\n        @keyframes pulse {\n          0% { transform: scale(1); }\n          50% { transform: scale(1.03); }\n          100% { transform: scale(1); }\n        }\n\n        .auralink-form-container {\n          max-width: 500px;\n          margin: 4rem auto;\n          padding: 2rem;\n          background: #ffffff;\n          border-radius: 50px;\n          box-shadow: 0 0 25px rgba(0, 0, 0, 0.2);\n          font-family: system-ui, sans-serif;\n          color: #000000;\n          position: relative;\n          animation: pulse 4s ease-in-out infinite;\n          transform-origin: center center;\n        }\n\n        .auralink-form-container h2 {\n          font-size: 1.5rem;\n          margin-bottom: 0.5rem;\n          text-align: center;\n          color: #000000;\n        }\n\n        .auralink-form-container label {\n          display: block;\n          margin-bottom: 1rem;\n          font-weight: bold;\n          color: #000000;\n        }\n\n        .auralink-form-group {\n          background: #f4f4f4;\n          padding: 1rem;\n          border: 1px solid #ccc;\n          border-radius: 12px;\n          margin-bottom: 1.5rem;\n        }\n\n        .auralink-form-container input[type="text"] {\n          width: 90%;\n          padding: 1rem;\n          border: 1px solid #444;\n          border-radius: 50px;\n          background: #f2f2f2;\n          color: #000000;\n          margin: 0 auto 1.5rem auto;\n          display: block;\n          font-size: 16px;\n        }\n\n        .auralink-form-container button {\n          width: 100%;\n          padding: 1rem;\n          background: #3E3E3E;\n          color: #ffffff;\n          border: none;\n          border-radius: 10px;\n          font-size: 1rem;\n          font-weight: bold;\n          cursor: pointer;\n          transition: background 0.3s ease;\n        }\n\n        .auralink-form-container button:hover {\n          background: #222;\n        }\n\n        .auralink-cards {\n          margin: 40px auto;\n          max-width: 1200px;\n          display: flex;\n          flex-wrap: wrap;\n          justify-content: center;\n          gap: 2rem;\n        }\n\n        .auralink-card {\n          width: 30%;\n          background: #0a0a0a;\n          padding: 1rem;\n          border-radius: 20px;\n          box-shadow: 0 0 25px rgba(255, 255, 255, 0.08);\n          color: #fff;\n          text-align: center;\n          transition: transform 0.3s ease;\n        }\n\n        .auralink-card:hover {\n          transform: translateY(-5px);\n        }\n\n        .auralink-card img {\n          width: 100%;\n          border-radius: 16px;\n          margin-bottom: 0.5rem;\n        }\n\n        .auralink-card div {\n          font-weight: bold;\n          font-size: 1rem;\n        }\n\n        .auralink-card small {\n          color: #888;\n        }\n\n        @media (max-width: 768px) {\n          .auralink-card {\n            width: 100%;\n          }\n        }\n      </style>\n\n      <div class="auralink-form-container">\n        <form id="card-form">\n          <div class="auralink-form-group">\n            <label for="email">Tape ton email ici :</label>\n            <input \n              type="text" \n              id="email" \n              name="email" \n              placeholder="ex: moi@email.com" \n              required \n            />\n          </div>\n          <button type="submit">Voir mes cartes</button>\n        </form>\n      </div>\n\n      <div id="auralink-results" class="auralink-cards"></div>\n    ',window.refreshAuralink=function(e){const n=o.current.querySelector("#auralink-results");n&&(Array.isArray(e)&&0!==e.length?n.innerHTML=e.map(e=>`\n        <div class="auralink-card">\n          <img src="${e.url}" alt="${e.filename}" />\n          <div>${e.filename}</div>\n          <small>${e.date}</small>\n        </div>\n      `).join(""):n.innerHTML="<p style='color:#fff;text-align:center'>Aucune carte trouvée.</p>")};const e=o.current.querySelector("#card-form");e.addEventListener("submit",async function(n){n.preventDefault();const t=e.querySelector("#email").value,r=await fetch("https://n8n.atkmusic.fr/webhook/a4d61ec4-6adb-4427-8a74-7c0058d29045",{method:"POST",headers:{"Content-Type":"application/json",Authorization:"Basic "+btoa("admin:LOrenzOmOOd!")},body:JSON.stringify({email:t})}),o=await r.json();window.refreshAuralink(o)})},[]),r.createElement("div",Object.assign({},t,{ref:o}))})({name:"EmbedHTMLCollector",normalize:!0,mixins:!0});var i=(0,o.Ay)(e=>{let{...n}=e;const{0:t,1:o}=(0,r.useState)(!1),a=e=>{o(!1),setTimeout(()=>{window.location.href=e},200)};return r.createElement(r.Fragment,null,!t&&r.createElement("div",{onClick:()=>o(!0),style:{position:"fixed",top:"20px",left:"20px",zIndex:"1003",cursor:"pointer",background:"transparent",padding:"10px"}},r.createElement("div",{style:{width:"30px",height:"4px",background:"#000",margin:"6px 0"}}),r.createElement("div",{style:{width:"30px",height:"4px",background:"#000",margin:"6px 0"}}),r.createElement("div",{style:{width:"30px",height:"4px",background:"#000",margin:"6px 0"}})),r.createElement("div",Object.assign({},n,{style:{position:"fixed",top:"0",left:t?"0":"-300px",width:"250px",height:"100vh",background:"#ffffff",boxShadow:"4px 0 15px rgba(0,0,0,0.1)",zIndex:"1002",transition:"left 0.3s ease",display:"flex",flexDirection:"column",padding:"40px 20px",pointerEvents:"auto"}}),t&&r.createElement("div",{onClick:()=>o(!1),style:{position:"absolute",top:"20px",right:"20px",fontFamily:"'AvenirNextCyrRegular', sans-serif",fontSize:"24px",cursor:"pointer",opacity:.6,zIndex:"1004"}},"✕"),r.createElement("div",{style:{marginTop:"60px",display:"flex",flexDirection:"column"}},r.createElement("div",{style:{fontSize:"20px",marginBottom:"20px",fontWeight:"bold"}},"Menu"),r.createElement("a",{onClick:()=>a("/index"),style:{margin:"10px 0",color:"#000",textDecoration:"none",cursor:"pointer"}},"Search by mood"),r.createElement("a",{onClick:()=>a("/votes"),style:{margin:"10px 0",color:"#000",textDecoration:"none",cursor:"pointer"}},"Page de votes"),r.createElement("a",{onClick:()=>a("/cartes"),style:{margin:"10px 0",color:"#000",textDecoration:"none",cursor:"pointer"}},"Mes cartes"))))})({name:"SlideMenu",description:{en:"SlideMenu — menu latéral gauche avec bouton burger intégré"},effects:{hover:":hover"},normalize:!0,mixins:!0,propInfo:{}}),l=t(5458);var s=(0,o.Ay)(()=>{const{0:e,1:n}=(0,r.useState)([]),{0:t,1:o}=(0,r.useState)(""),{0:a,1:i}=(0,r.useState)(""),{0:s,1:c}=(0,r.useState)(!0),{0:d,1:u}=(0,r.useState)(null),{0:m,1:f}=(0,r.useState)([]);(0,r.useEffect)(()=>{fetch("https://n8n.atkmusic.fr/webhook/8b290d8b-12b4-435c-ab94-58c157b7ba7d").then(e=>e.json()).then(e=>{Array.isArray(e)?n(e):Array.isArray(e.data)?n(e.data):(console.error("Format inattendu :",e),n([])),c(!1)}).catch(e=>{console.error("Erreur de chargement :",e),u("Erreur lors du chargement des données"),c(!1)});try{const e=JSON.parse(localStorage.getItem("votedForever"))||[];f(e)}catch(t){f([])}const e=document.createElement("style");e.innerText="\n      @keyframes rotation {\n        0% { transform: rotate(0deg); }\n        100% { transform: rotate(360deg); }\n      }\n    ",document.head.appendChild(e)},[]),(0,r.useEffect)(()=>{const e=new URLSearchParams(window.location.search).get("soundID");if(e){const n=setInterval(()=>{const t=document.getElementById(`sound-${e}`);t&&(t.scrollIntoView({behavior:"smooth",block:"center"}),t.style.boxShadow="0 0 0 3px #4caf50, 0 0 10px #4caf50aa",clearInterval(n))},500);setTimeout(()=>clearInterval(n),5e3)}},[]);const p=e=>{const n=e.match(/(?:https?:\/\/)?(?:www\.)?(?:youtube\.com\/watch\?v=|youtu\.be\/)([a-zA-Z0-9_-]+)/);return n?n[1]:""},g=(0,l.A)(e.filter(e=>{const n=!t||(e.mood||"").trim().toLowerCase()===t.toLowerCase(),r=(e.artist+" "+e.title).toLowerCase().includes(a.toLowerCase());return n&&r})).sort((e,n)=>(n.votes||0)-(e.votes||0));return s?r.createElement("div",{style:{padding:"2rem",textAlign:"center",color:"#fff",backgroundColor:"#fff",height:"100vh"}},r.createElement("p",{style:{fontSize:"1.2rem",color:"#000"}},"Chargement des sons..."),r.createElement("div",{style:{width:"40px",height:"40px",margin:"1rem auto",border:"4px solid #ccc",borderTop:"4px solid #fff",borderRadius:"50%",animation:"rotation 1s linear infinite"}})):d?r.createElement("div",{style:{padding:"2rem",textAlign:"center",color:"#ff6b6b",backgroundColor:"#000",height:"100vh"}},r.createElement("p",null,d)):r.createElement("div",{style:{padding:"1rem",color:"#fff",backgroundColor:"#fff"}},r.createElement("div",{style:{marginBottom:"1rem"}},r.createElement("label",{style:{marginRight:"0.5rem"}},"Mood :"),r.createElement("select",{onChange:e=>o(e.target.value)},r.createElement("option",{value:""},"Tous"),r.createElement("option",{value:"Dansant"},"Dansant"),r.createElement("option",{value:"Chill"},"Chill"),r.createElement("option",{value:"Réflexion"},"Réflexion"),r.createElement("option",{value:"Mélancolie"},"Mélancolie"),r.createElement("option",{value:"Planant"},"Planant"),r.createElement("option",{value:"Détermination"},"Détermination"),r.createElement("option",{value:"Love"},"Love")),r.createElement("input",{type:"text",placeholder:"Rechercher artiste/titre",onChange:e=>i(e.target.value),style:{marginLeft:"1rem",padding:"4px 8px"}})),r.createElement("div",{style:{display:"grid",gridTemplateColumns:"repeat(auto-fit, minmax(220px, 1fr))",columnGap:"1.5rem",rowGap:"2rem"}},g.map(e=>r.createElement("div",{key:e["CUSTOM ID"],id:`sound-${e["CUSTOM ID"]}`,style:{display:"flex",flexDirection:"column",border:"1px solid #222",backgroundColor:"#161616",boxShadow:"0 0 0 1px #2a2a2a inset, 0 2px 6px rgba(0,0,0,0.8)",padding:"1rem",borderRadius:"8px",transition:"transform 0.2s ease, box-shadow 0.2s ease",cursor:"pointer"},onMouseEnter:e=>{e.currentTarget.style.transform="scale(1.03)",e.currentTarget.style.boxShadow="0 4px 12px rgba(255,255,255,0.2)"},onMouseLeave:e=>{e.currentTarget.style.transform="scale(1)",e.currentTarget.style.boxShadow="0 2px 4px rgba(0,0,0,0.5)"}},r.createElement("h3",{style:{color:"#fff",fontSize:"1rem",fontWeight:"bold",lineHeight:"1.3",minHeight:"2.6em",maxHeight:"2.6em",overflow:"hidden",textOverflow:"ellipsis",display:"-webkit-box",WebkitLineClamp:2,WebkitBoxOrient:"vertical"}},e.artist,"–",e.title),r.createElement("iframe",{width:"100%",style:{aspectRatio:"1 / 1",width:"100%",borderRadius:"8px"},src:`https://www.youtube.com/embed/${p(e.youtube)}`,frameBorder:"0",allowFullScreen:!0,title:e.title}),r.createElement("div",{style:{marginTop:"0.5rem"}},r.createElement("p",{style:{margin:0}},r.createElement("strong",null,"Mood :"),e.mood||"Non précisé"),r.createElement("p",{style:{margin:"0.25rem 0 0 0"}},r.createElement("strong",null,"Votes :"),e.votes||0)),r.createElement("div",{style:{display:"flex",justifyContent:"space-between",alignItems:"center",gap:"0.5rem",marginTop:"1rem"}},r.createElement("button",{onClick:()=>(async e=>{let t=[];try{t=JSON.parse(localStorage.getItem("votedForever"))||[]}catch(r){t=[]}if(t.includes(e))alert("Vous avez déjà voté pour ce son !");else{f(n=>[].concat((0,l.A)(n),[e]));try{const r=await fetch("https://n8n.atkmusic.fr/webhook/02c420f4-9f2c-4d80-ac57-5687d787410e",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({id:e})});if(r.ok){const o=await r.json();n(n=>n.map(n=>n["CUSTOM ID"]===e?{...n,votes:o.votes}:n));const a=[].concat((0,l.A)(t),[e]);localStorage.setItem("votedForever",JSON.stringify(a))}else alert("Le vote a échoué côté serveur.")}catch(o){alert("Erreur de réseau : le vote n’a pas pu être envoyé.")}}})(e["CUSTOM ID"]),disabled:m.includes(e["CUSTOM ID"]),style:{flex:1,padding:"12px",backgroundColor:m.includes(e["CUSTOM ID"])?"#4CAF50":"#fff",color:m.includes(e["CUSTOM ID"])?"#fff":"#000",borderRadius:"6px",border:"none",fontWeight:"bold",cursor:"pointer"}},m.includes(e["CUSTOM ID"])?"✔":"Vote"),r.createElement("button",{onClick:()=>{const n=`https://trackdigger.netlify.app/votes?soundID=${e["CUSTOM ID"]}`,t={title:`${e.artist} – ${e.title}`,text:"Vote pour ce son sur TrackDigger 🎧",url:n};navigator.share?navigator.share(t).catch(e=>console.error("Partage annulé:",e)):navigator.clipboard.writeText(n).then(()=>alert("Lien copié !"))},style:{flex:1,padding:"12px",backgroundColor:"#333",color:"#fff",border:"1px solid #555",borderRadius:"6px",fontWeight:"bold",cursor:"pointer"}},"Partage"))))))})({name:"MusicVoterTest",effects:{hover:":hover"},normalize:!0,mixins:!0,description:{en:"MusicVoterTest — affiche les sons proposés et permet de voter"},propInfo:{}});var c=(0,o.Ay)(e=>{let{children:n,...t}=e;const o=(0,r.useRef)(null),a=(0,r.useRef)(null),{0:i,1:l}=(0,r.useState)(!1),{0:s,1:c}=(0,r.useState)(!1);return(0,r.useLayoutEffect)(()=>{if(!o.current)return;o.current.innerHTML='\n      <style>\n        @keyframes pulse {\n          0% { transform: scale(1); }\n          50% { transform: scale(1.05); }\n          100% { transform: scale(1); }\n        }\n\n        .auralink-form-container {\n          max-width: 500px;\n          margin: 4rem auto;\n          padding: 2rem;\n          background: #ffffff;\n          border-radius: 60px;\n          font-family: system-ui, sans-serif;\n          color: #000000;\n          box-shadow: 0 0 25px rgba(0, 0, 0, 0.2);\n          position: relative;\n          animation: pulse 4s ease-in-out infinite;\n          transform-origin: center center;\n        }\n\n        .auralink-form-container h2 {\n          font-size: 1.5rem;\n          margin-bottom: 0.5rem;\n          text-align: center;\n          color: #000000;\n        }\n\n        .auralink-form-container label {\n          display: block;\n          margin-bottom: 2rem;\n          font-weight: bold;\n          color: #000000;\n        }\n\n        .auralink-form-group {\n          background: #f4f4f4;\n          padding: 1rem;\n          border: 1px solid #ccc;\n          border-radius: 50px;\n          margin-bottom: 1.5rem;\n        }\n\n        .auralink-form-container input[type="text"] {\n          width: 90%;\n          padding: 1rem;\n          border: 1px solid #444;\n          border-radius: 50px;\n          background: #f2f2f2;\n          color: #000000;\n          margin: 0 auto 1.5rem auto;\n          display: block;\n          font-size: 16px;\n        }\n\n        .auralink-form-container button {\n          width: 100%;\n          padding: 1rem;\n          background: #3E3E3E;\n          color: #ffffff;\n          border: none;\n          border-radius: 10px;\n          font-size: 1rem;\n          font-weight: bold;\n          cursor: pointer;\n          transition: background 0.3s ease;\n        }\n\n        .auralink-form-container button:hover {\n          background: #333;\n        }\n      </style>\n\n      <div class="auralink-form-container">\n        <form id="mood-form">\n          <div class="auralink-form-group">\n            <label for="mood">Décris ton mood :</label>\n            <input \n              type="text" \n              id="mood" \n              name="mood" \n              placeholder="Je veux danser, pleurer ..." \n              required \n            />\n          </div>\n          <button type="submit">Demander</button>\n        </form>\n      </div>\n\n      <div id="auralink-results" style="margin-top: 40px;"></div>\n    ';const e=o.current.querySelector("#mood-form");e.addEventListener("submit",async function(n){n.preventDefault();const t=e.querySelector("#mood").value;window.startAuralinkLoading&&window.startAuralinkLoading();const r=await fetch("https://n8n.atkmusic.fr/webhook/74886902-8e06-4662-89d6-6a92561ac9f7",{method:"POST",headers:{"Content-Type":"application/json",Authorization:"Basic "+btoa("admin:LOrenzOmOOd!")},body:JSON.stringify({chatInput:t})}),o=await r.text();window.refreshAuralink&&window.refreshAuralink(o)})},[]),(0,r.useEffect)(()=>{"undefined"!=typeof window&&(window.startAuralinkLoading=()=>{c(!0),l(!1),a.current&&(a.current.innerHTML="")},window.refreshAuralink=e=>{if(c(!1),a.current){a.current.innerHTML="",a.current.insertAdjacentHTML("beforeend",e),l(!0);a.current.querySelectorAll("a").forEach(e=>{e.addEventListener("click",n=>{n.preventDefault(),window.open(e.href,"_blank")})});const n=a.current.querySelectorAll(".track-card"),t=[document.querySelector('input[name="track1"]'),document.querySelector('input[name="track2"]'),document.querySelector('input[name="track3"]')];n.length>=3&&t.every(Boolean)&&n.forEach((e,n)=>{if(n<3){var r,o,a,i;const l=(null===(r=e.querySelector(".track-title"))||void 0===r||null===(o=r.textContent)||void 0===o?void 0:o.trim())||"",s=(null===(a=e.querySelector(".track-artist"))||void 0===a||null===(i=a.textContent)||void 0===i?void 0:i.trim())||"";t[n].value=`${l} – ${s}`}})}},window.handlePackSubmit=function(e){e.preventDefault();const n=e.target,t=n.email.value,r=n.track1.value,o=n.track2.value,a=n.track3.value;fetch("https://n8n.atkmusic.fr/webhook-test/receive-pack-request",{method:"POST",headers:{"Content-Type":"application/x-www-form-urlencoded"},body:new URLSearchParams({email:t,track1:r,track2:o,track3:a})}).then(e=>alert(e.ok?"🎉 Pack envoyé avec succès !":"❌ Une erreur est survenue.")).catch(()=>alert("❌ Problème réseau."))})},[]),r.createElement("div",t,r.createElement("div",{ref:o}),s&&r.createElement("div",{style:{margin:"20px auto",padding:"16px 24px",border:"2px solid #0000000",borderRadius:"12px",maxWidth:"260px",display:"flex",flexDirection:"column",alignItems:"center",backgroundColor:"transparent"}},r.createElement("div",{style:{width:"30px",height:"30px",border:"4px solid #000000",borderTop:"4px solid transparent",borderRadius:"50%",animation:"spin 1s linear infinite"}}),r.createElement("p",{style:{marginTop:"10px",color:"#000000",fontSize:"20px"}},"Vote toi aussi pour les sons qui appraissent dans les sélections"),r.createElement("style",null,"@keyframes spin { 0% { transform: rotate(0deg); } 100% { transform: rotate(360deg); } }")),r.createElement("div",{ref:a}))})({name:"EmbedHTMLUnified",normalize:!0,mixins:!0})}}]);
//# sourceMappingURL=fbd2b7d02e17777bf71306c56a4be929f3cd6fff-dc8db294295d7595252c.js.map